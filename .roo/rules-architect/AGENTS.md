# 项目架构规则 (非显而易见部分)

## 核心架构决策

- 本地优先数据存储：评价数据先保存在 localStorage，支持离线操作
- 批量提交策略：所有评价完成后一次性提交，减少网络请求
- 基于姓名的身份验证：使用加密算法生成用户 ID，无需传统登录系统

## 数据流架构

1. 用户身份验证：姓名 → 人员数据查找 → 加密 ID 生成
2. 评价流程：选择人员 → 评分 → 本地存储 → 批量提交
3. 数据同步：localStorage → API → Supabase 数据库

## 关键组件依赖

- `EvaluationVote.jsx`: 核心评价组件，依赖 localStorage 和 API
- `VotePersonnelList.jsx`: 人员列表组件，依赖等级分布验证
- `AdminDashboard.jsx`: 管理面板，依赖统计数据和导出功能

## 部门隔离设计

- 经控贸易和开投贸易部门有独立的等级分布要求，职能部门不需要验证
- 职能部门可以评价多个部门，其他部门只评价自己部门
- 评价数据按部门和角色分别统计和管理

## 扩展性考虑

- 新增部门需要更新人员数据和等级分布规则
- 评价标准修改需要更新`evaluationCriteria.js`
- 数据库表结构支持扩展字段

## 性能优化策略

- 本地存储减少服务器负载
- 批量 API 调用提高效率
- 组件级状态管理避免不必要的重渲染
