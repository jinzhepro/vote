# 人员数据上传脚本使用指南

本目录包含用于将人员数据上传到 Supabase 数据库的脚本。

## 脚本说明

### 1. create-tables-manually.js

- **用途**: 提供数据库表创建的详细指南
- **运行命令**: `npm run setup:guide`
- **功能**: 显示需要在 Supabase 控制台中手动执行的 SQL 语句

### 2. upload-personnel-to-db.js

- **用途**: 将人员数据上传到数据库
- **运行命令**: `npm run upload:personnel`
- **功能**:
  - 读取本地人员数据（经控贸易和开投贸易部门）
  - 生成唯一 ID（JK001-JK053 和 KT001-KT021）
  - 分批上传数据到 Supabase 数据库
  - 提供上传结果验证

## 使用步骤

### 第一步：设置数据库表

1. 运行 `npm run setup:guide` 获取 SQL 语句
2. 登录 Supabase 控制台: https://supabase.com/dashboard
3. 选择项目并进入 SQL 编辑器
4. 复制并执行显示的 SQL 语句

### 第二步：上传人员数据

1. 确保数据库表已创建成功
2. 运行 `npm run upload:personnel` 上传数据
3. 脚本会显示上传进度和结果

## 数据结构

### 人员数据

- **经控贸易部门**: 53 人
- **开投贸易部门**: 21 人
- **总计**: 74 人

### ID 格式

- 经控贸易: JK001-JK053
- 开投贸易: KT001-KT021

## 注意事项

1. 确保已正确配置 `.env.local` 文件中的 Supabase 连接信息
2. 数据库表必须先创建才能上传数据
3. 脚本会清空现有数据后重新上传
4. 上传过程中会显示详细的进度信息

## 故障排除

### 连接失败

- 检查 `.env.local` 中的 Supabase URL 和密钥
- 确认网络连接正常

### 表不存在错误

- 确保已按照指南创建数据库表
- 检查表名和字段名是否正确

### 权限错误

- 确认 RLS 策略已正确设置
- 检查 API 密钥权限
